<div>
    <div>
        <div>
            <select ng-model="importShop" ng-disabled="importing" ng-options="shopID as shop.name for (shopID,shop) in shops">
                <option value="">-- choose shop --</option>
            </select>
            <br/>
            <select ng-model="import" ng-disabled="importing" ng-options="importID as importer.name for (importID,importer) in importers">
                <option value="">-- choose import --</option>
            </select>
        </div>

        <div ng-show="import && importers[import] && importShop && shops[importShop]">
            <div ng-show="!importing">
                Import <strong>{{importers[import].name}}</strong> from <strong>{{importers[import]['raw-table']}}</strong>...<br/>
                Into <strong>{{shops[importShop].name}}</strong> @ <em>{{shops[importShop].catalog}}</em><br/>

                <button ng-click="startImport()" class="btn btn-warning">Import!</button>
            </div>

            <div ng-show="importing">
                Importing <strong>{{importing.import.name}}</strong> from <strong>{{importing.import['raw-table']}}</strong>...<br/>
                Into <strong>{{importing.shop.name}}</strong> @ <em>{{importing.shop.catalog}}</em><br/>
                Started at {{importing.startTime | date:'mediumTime'}} on {{importing.startTime | date:'shortDate'}}
            </div>
        </div>
    </div>

    <div ng-show="importHistory.length">
        <h4>History</h4>
        <ul>
            <li ng-repeat="history in importHistory"><strong>{{history.name}}</strong> into <strong>{{history.shop.name}}</strong> @ {{history.start | date:'mediumTime'}} to {{history.finish | date:'mediumTime'}} ({{ (history.finish-history.start)/1000 }}s) on {{history.finish | date:'shortDate'}}</li>
        </ul>
    </div>
</div>